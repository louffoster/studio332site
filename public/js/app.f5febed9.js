(function(t){function e(e){for(var s,n,o=e[0],h=e[1],l=e[2],u=0,d=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&d.push(r[n][0]),r[n]=0;for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(t[s]=h[s]);c&&c(e);while(d.length)d.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],s=!0,o=1;o<i.length;o++){var h=i[o];0!==r[h]&&(s=!1)}s&&(a.splice(e--,1),t=n(n.s=i[0]))}return t}var s={},r={app:0},a=[];function n(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=s,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],h=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var c=h;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";i("85ec")},1045:function(t,e,i){},4915:function(t,e,i){t.exports=i.p+"img/s332logotype.e277cc74.png"},"4f30":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var s=i("2b0e"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Studio332Header"),i("router-view")],1)},a=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("router-link",{attrs:{to:{name:"home"}}},[s("img",{staticClass:"s332",attrs:{src:i("4915")}})]),s("ul",{staticClass:"menu"},[s("router-link",{attrs:{to:"/home"}},[s("li",[t._v("Home")])]),s("router-link",{attrs:{to:"/games"}},[s("li",[t._v("Games")])])],1)],1)},o=[],h={name:"Studio332Header"},l=h,c=(i("7e0e"),i("2877")),u=Object(c["a"])(l,n,o,!1,null,"350e5495",null),d=u.exports,f={components:{Studio332Header:d}},v=f,g=(i("034f"),Object(c["a"])(v,r,a,!1,null,null,null)),p=g.exports,m=i("8c4f"),w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"content"},[i("h2",[t._v("Welcome")]),i("p",[t._v(" Studio332 likes to make games for mobile and web, but mostly web. ")]),i("p",[i("router-link",{attrs:{to:"/virus"}},[t._v("pixi test game")])],1),i("p",[t._v("Check out some old mobile game code here (and this site):")]),t._m(0)])])},y=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[i("a",{attrs:{href:"https://github.com/louffoster/BlastWords"}},[t._v("Android game: BlastWords")])]),i("li",[i("a",{attrs:{href:"https://github.com/louffoster/flickit"}},[t._v("Android game: FlickIt Alley")])]),i("li",[i("a",{attrs:{href:"https://github.com/louffoster/studio332-site"}},[t._v("This site")])])])}],k={name:"home",components:{}},b=k,S=(i("c116"),Object(c["a"])(b,w,y,!1,null,"0d5e95f6",null)),O=S.exports,x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"content"},[i("h2",[t._v("Games")]),t._m(0),0==t.working?t._l(t.games,(function(e){return i("p",{key:e.id},[i("b",[t._v(t._s(e.name))]),t._v(": "+t._s(e.description)+" "),i("router-link",{attrs:{to:e.url}},[i("span",[t._v("Play Now!")])])],1)})):t._e()],2)])},C=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[t._v(" Lately, Studio332 has been experimenting with browser-based games using "),i("a",{attrs:{href:"https://phaser.io/",target:"_blank"}},[t._v("Phaser")]),t._v(". The first sample is a bit rough, but is up and working. Play it at the link below. More to come soon! ")])}],R=i("5530"),F=i("2f62"),L={name:"games",components:{},computed:Object(R["a"])({},Object(F["c"])({working:function(t){return t.working},games:function(t){return t.games}})),created:function(){this.$store.dispatch("getGames")}},j=L,T=(i("baf3"),Object(c["a"])(j,x,C,!1,null,"0633aa0f",null)),I=T.exports,B=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},P=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{attrs:{id:"lwgame"}})])}],E=i("1da1"),_=(i("96cf"),i("d4ef")),G=i.n(_),z=i("d4ec"),M=i("bee2"),D=i("262e"),W=i("2caf"),A=(i("159b"),i("99af"),i("7db0"),i("a434"),i("c740"),i("bc3a")),V=i.n(A);s["a"].use(F["a"]);var Z=new F["a"].Store({state:{authToken:"",games:[],working:!1,highScoreRank:-1,highScore:0},getters:{gameID:function(t){var e=Ht.currentRoute.fullPath,i=t.games.find((function(t){return t.url==e}));return i?i.id:0},highScores:function(t){var e=Ht.currentRoute.fullPath,i=t.games.find((function(t){return t.url==e}));return i?i.highScores:[]}},mutations:{addHighScore:function(t,e){t.highScoreRank=-1,t.highScore=0;var i=Ht.currentRoute.fullPath,s=t.games.find((function(t){return t.url==i}));s&&s.highScores.some((function(i,s){return e>i.score&&(t.highScoreRank=s,t.highScore=e),t.highScoreRank>-1}))},resetCurrentHighScore:function(t){t.highScoreRank=-1,t.highScore=0},setAuthToken:function(t,e){t.authToken=e},setWorking:function(t,e){t.working=e},setGames:function(t,e){t.games.splice(0,t.games.length),e.forEach((function(e){e.highScores=[],t.games.push(e)}))},setGameHighScores:function(t,e){var i=e.id,s=e.scores,r=t.games.findIndex((function(t){return t.id=i}));if(r>-1){var a=t.games[r];a.highScores=s,t.games.splice(r,1,a)}}},actions:{startGame:function(t,e){t.commit("setWorking",!0),V.a.get("/api/games/".concat(e,"/start")).then((function(e){t.commit("setAuthToken",e.data),t.commit("setWorking",!1)})).catch((function(){t.commit("setWorking",!1)}))},getGames:function(t){return Object(E["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit("setWorking",!0),e.abrupt("return",V.a.get("/api/games").then((function(e){t.commit("setGames",e.data),t.commit("setWorking",!1)})).catch((function(){t.commit("setWorking",!1)})));case 2:case"end":return e.stop()}}),e)})))()},getHighScores:function(t,e){return Object(E["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.commit("setWorking",!0),i.abrupt("return",V.a.get("/api/games/".concat(e,"/hiscore")).then((function(i){t.commit("setGameHighScores",{id:e,scores:i.data}),t.commit("setWorking",!1)})).catch((function(){t.commit("setGameHighScores",{id:e,scores:[]}),t.commit("setWorking",!1)})));case 2:case"end":return i.stop()}}),i)})))()}},modules:{},plugins:[]}),H=function t(e,i,s){var r=this;Object(z["a"])(this,t),this.scene=e,this.hsGroup=this.scene.add.container(i,s);var a={fontFamily:"Arial",fontSize:"22px",fill:"#fff",stroke:"#222",strokeThickness:4},n={fontFamily:"Courier",fontSize:"14px",fill:"#fff",stroke:"#000",strokeThickness:3,align:"left"},o=this.scene.add.text(230,0,"High Scores",a);o.setOrigin(.5),this.hsGroup.add(o);var h=Z.getters.highScores;if(0==h.length){var l=this.scene.add.text(230,40,"No high scores yet!",n);l.setOrigin(.5),l.setFontSize(14),this.hsGroup.add(l)}else{var c=20;h.forEach((function(t,e){var i=160;if(0==e){i-=20;var s=r.scene.add.text(i,c,"".concat(e+1,". ").concat(t.player),n);s.setFontSize(20),s.setColor("#ff0"),r.hsGroup.add(s)}else{var a=r.scene.add.text(i,c,"".concat(e+1,"."),n);a.setOrigin(.5,0),r.hsGroup.add(a);var o=r.scene.add.text(180,c,t.player,n);r.hsGroup.add(o)}var h=r.scene.add.text(260,c,"".concat(t.score),n);h.setOrigin(0,0),0==e&&(h.setFontSize(18),h.setColor("#ff0")),r.hsGroup.add(h),c+=20,0==e&&(c+=10)}))}},N=function(t){Object(D["a"])(i,t);var e=Object(W["a"])(i);function i(){return Object(z["a"])(this,i),e.call(this,{key:"menu"})}return Object(M["a"])(i,[{key:"preload",value:function(){this.load.image("del","/latticewords/images/del.png")}},{key:"create",value:function(){var t=this,e={fontFamily:"Arial",fontSize:"56px",fill:"#fff",stroke:"#448AFF",strokeThickness:10},i=this.add.text(230,120,"LatticeWords",e);i.setOrigin(.5),i.setShadow(3,3,"#222",2,!0,!1);var s={fontFamily:"Arial",fontSize:"22px",fill:"#fff",stroke:"#222",strokeThickness:4,inputEnabled:!0},r=this.add.text(230,220,"Play Now!",s);r.setOrigin(.5),r.setFontSize(32),r.setInteractive(),r.on("pointerup",(function(){t.scene.start("latticewords")})),this.input.on("gameobjectover",(function(t,e){e.setTint(16776960)})),this.input.on("gameobjectout",(function(t,e){e.clearTint()}));var a=this.add.text(230,270,"How to play",s);a.setFontSize(16),a.setInteractive(),a.setOrigin(.5),a.on("pointerup",(function(){t.helpGroup.setVisible(!0)})),this.hiScore=new H(this,0,310),this.createRulesMenu()}},{key:"createRulesMenu",value:function(){var t=this,e=this.add.rectangle(0,140,460,550,3096997);e.setOrigin(0,0);var i={fontFamily:"Arial",fontSize:"22px",fill:"#fff",stroke:"#222",strokeThickness:3,wordWrap:{width:420,useAdvancedWrap:!0}},s=this.add.text(20,160,"How to play",i);s.setOrigin(0,0);var r=["+ Drag rows and columns to arrange letters into words","+ Words must be selected to score","+ Tap to select a letter","+ Last selected letter is marked with a dot","+ Double tap to select letters connected to the dot","+ Form words from left to right and top to bottom","+ Only one word per row or column is allowed","+ Tap a selected word or letter to deselect it","+ Tap 'Score Grid' to score all selected words","+ Base score is determined by word length","+ Score is doubled for each word after the first"],a=this.add.text(30,210,r,i);a.setFontSize(16),a.setOrigin(0,0);var n=this.add.text(40,480,"OK",i);n.setFontSize(20),n.setInteractive(),n.setOrigin(.5),n.on("pointerup",(function(){t.helpGroup.setVisible(!1)})),this.helpGroup=this.add.container(0,40,[e,s,a,n]),this.helpGroup.setVisible(!1)}}]),i}(G.a.Scene),$=(i("b0c0"),function(t){Object(D["a"])(i,t);var e=Object(W["a"])(i);function i(){return Object(z["a"])(this,i),e.call(this,{key:"high_score_menu"})}return Object(M["a"])(i,[{key:"preload",value:function(){this.load.image("del","/latticewords/images/del.png")}},{key:"create",value:function(){var t=this;this.name=[],this.nameIdx=0;var e={fontFamily:"Courier",fontSize:"32px",fill:"#333",strokeThickness:0,inputEnabled:!0},i={fontFamily:"Arial",fontSize:"32px",fill:"#fff",stroke:"#222",strokeThickness:3},s=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","<"],r=this.add.text(230,40,"You got a new high score!",i);r.setOrigin(.5,0);var a=this.add.text(190,110,"Rank",i);a.setFontSize(16),a.setOrigin(.5,0),a=this.add.text(190,135,""+Z.state.highScoreRank,i),a.setFontSize(16),a.setOrigin(.5,0),a=this.add.text(230,110,"Score",i),a.setFontSize(16),a.setOrigin(0,0),a=this.add.text(230,135,""+Z.state.highScore,i),a.setFontSize(16),a.setOrigin(0,0);var n=30,o=180;s.forEach((function(i,s){s%9==0&&(o+=50,n=30);var r=t.add.rectangle(n,o,45,45,16777215);if(r.setOrigin(.5,.5),"<"!=i){var a=t.add.text(n,o,i,e);a.setOrigin(.5),a.setInteractive(),a.on("pointerup",(function(){t.nameIdx<3&&(t.name[t.nameIdx].text=a.text,t.nameIdx++)}))}else{var h=t.add.sprite(n,o,"del");h.setOrigin(.5),h.setInteractive(),h.on("pointerup",(function(){t.nameIdx>0&&(t.nameIdx--,t.name[t.nameIdx].text="_")}))}n+=50})),n=180,o=400;for(var h=0;h<3;h++){var l=this.add.rectangle(n,o,45,45,16777215);l.setOrigin(.5,.5);var c=this.add.text(n,o,"_",e);c.setOrigin(.5),this.name.push(c),n+=50}}}]),i}(G.a.Scene)),U=(i("cb29"),i("4d90"),i("2909")),Y=(i("ac1f"),i("1276"),i("d3b7"),i("6062"),i("3ca3"),i("ddb0"),i("a15b"),100),X="#0e267f",J="#2f95ff",K=function(){function t(e,i,s,r,a){Object(z["a"])(this,t),this.scene=e,this.rows=i,this.cols=s,this.tileSize=r,this.red=!1,this.animating=!1,this.pool=a,this.lastR=-1,this.lastC=-1,this.bkg=this.scene.add.rectangle(0,0,r*s,r*i,16777215),this.bkg.setOrigin(0,0),this.width=this.bkg.width,this.height=this.bkg.height,this.tilesGroup=this.scene.add.container(0,40);var n=this.scene.add.sprite(0,0,"grid");n.setOrigin(0,0),this.lastTileMark=this.scene.add.circle(200,200,4,16742144),this.lastTileMark.setOrigin(0,0),this.lastTileMark.setVisible(!1),this.tilesGroup.add(this.bkg),this.tilesGroup.add(n),this.grid=[]}return Object(M["a"])(t,[{key:"setVisible",value:function(t){this.tilesGroup.setVisible(t)}},{key:"empty",value:function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.cols;e++)this.grid[t][e].letter.destroy();this.red=!1,this.animating=!1,this.grid=[]}},{key:"fill",value:function(){this.red=!1,this.animating=!1,this.grid=[];for(var t=0;t<this.rows;t++){this.grid.push([]);for(var e=0;e<this.cols;e++){var i=this.pool.pop();this.grid[t].push(this.addTile(i,t,e,!1,!1))}}}},{key:"destroySelectedTiles",value:function(t){for(var e=[],i=[],s=0;s<this.rows;s++)for(var r=0;r<this.cols;r++){var a=this.grid[s][r];1==a.selected&&(e.push(s+","+r),i.push(a.letter))}this.scene.tweens.add({targets:i,alpha:0,duration:250,ease:"Linear",onCompleteParams:[this],onComplete:function(s,r,a){for(var n=0;n<e.length;n++){var o=e[n].split(","),h=i[n];h.destroy();var l=t.pop();0==t.length&&t.refill(),a.grid[o[0]][o[1]]=a.addTile(l,o[0],o[1])}}})}},{key:"checkWords",value:function(t){var e,i,s=this,r=[],a="",n=[];for(this.lastC=-1,this.lastR=-1,this.lastTileMark.setVisible(!1),e=0;e<this.rows;e++){var o=[];for(i=0;i<this.cols;i++)if(!0===this.grid[e][i].selected)a+=this.grid[e][i].letter.text,o.push(e+","+i);else if(a.length>0)break;a.length>1&&(r.push(a),n=n.concat(o)),a=""}for(a="",i=0;i<this.cols;i++){var h=[];for(e=0;e<this.rows;e++)if(!0===this.grid[e][i].selected){a+=this.grid[e][i].letter.text;var l=e+","+i;h.push(l)}else if(a.length>0)break;a.length>1&&(r.push(a),n=n.concat(h)),a=""}0!==r.length&&(n=Object(U["a"])(new Set(n)),V.a.post("/api/latticewords/check",{words:r.join(",")}).then((function(e){s.handleResults(e.data,n,t)})).catch((function(){})))}},{key:"handleResults",value:function(t,e,i){if(0!==t){for(var s=0,r=[],a=0;a<e.length;a++){var n=e[a].split(","),o=this.grid[n[0]][n[1]];r.push(o.letter)}i(t,s);var h=this;this.scene.tweens.add({targets:r,alpha:0,duration:250,ease:"Linear",onComplete:function(){h.replaceUsedTiles(e)}})}else this.showFailure(e)}},{key:"replaceUsedTiles",value:function(t){for(var e=0;e<t.length;e++){var i=t[e].split(","),s=this.grid[i[0]][i[1]];s.letter.destroy();var r=this.pool.pop();0==this.pool.length&&this.refillLetters(),this.grid[i[0]][i[1]]=this.addTile(r,i[0],i[1])}}},{key:"showFailure",value:function(t){for(var e=[],i=0;i<t.length;i++){var s=t[i].split(","),r=this.grid[s[0]][s[1]];r.selected=!1,r.letter.setFill("#ff0000"),e.push(r)}var a=0,n=!1;this.scene.tweens.addCounter({from:0,to:50,duration:1e3,onUpdate:function(){if(a+=1,10==a){a=0,n=!n;for(var t=0;t<e.length;t++)0==n?e[t].letter.setFill("#ff0000"):e[t].letter.setFill(X)}},onComplete:function(){for(var t=0;t<e.length;t++)e[t].letter.setFill(X)}})}},{key:"flash",value:function(){this.red=!this.red,0==this.red?this.bkg.setFillStyle(16777215):this.bkg.setFillStyle(14548991)}},{key:"addTile",value:function(t,e,i,s,r){var a=42+this.tileSize*i,n=43+this.tileSize*e,o={fontSize:"52px",fontWeight:"bold",fill:X,align:"center"},h=this.scene.add.text(a,n,t,o);return h.setOrigin(.5),!0===s&&h.setFill(J),!1===r&&(h.alpha=0,this.scene.tweens.add({targets:h,alpha:1,duration:250,ease:"Linear"})),this.tilesGroup.add(h),{letter:h,selected:s}}},{key:"getClickedCol",value:function(t){var e=t-0;return Math.floor(e/this.tileSize)}},{key:"getClickedRow",value:function(t){var e=t-40;return Math.floor(e/this.tileSize)}},{key:"handlePointerUp",value:function(t,e,i){var s=t-0,r=e-40;if(!(s<=-10||r<=-10||s>=this.width-10||r>=this.height-10)){var a=Math.floor(s/this.tileSize),n=Math.floor(r/this.tileSize),o=this.grid[n][a];if(!0===o.selected){o=this.grid[n][a],o.selected=!1,o.letter.setFill(X),this.lastC=-1,this.lastR=-1,this.lastTileMark.setVisible(!1);var h=-1,l=1;while(0!=h||0!=l)0!=l&&(a+l>=this.cols?l=0:(o=this.grid[n][a+l],o.selected?(o.selected=!1,o.letter.setFill(X),l++):l=0)),0!=h&&(a+h<0?h=0:(o=this.grid[n][a+h],o.selected?(o.selected=!1,o.letter.setFill(X),h--):h=0));var c=-1,u=1;while(0!=c||0!=u)0!=u&&(n+u>=this.rows?u=0:(o=this.grid[n+u][a],o.selected?(o.selected=!1,o.letter.setFill(X),u++):u=0)),0!=c&&(n+c<0?c=0:(o=this.grid[n+c][a],o.selected?(o.selected=!1,o.letter.setFill(X),c--):c=0))}else{if(!1===i)return o.selected=!0,o.letter.setFill(J),this.lastC=a,this.lastR=n,this.lastTileMark.setVisible(!0),this.lastTileMark.x=this.tileSize*a+10,void(this.lastTileMark.y=this.tileSize*n+50);if(n==this.lastR)for(var d=Math.min(a,this.lastC),f=Math.max(a,this.lastC),v=d;v<=f;v++)o=this.grid[n][v],o.selected=!0,o.letter.setFill(J);else if(a==this.lastC)for(var g=Math.min(n,this.lastR),p=Math.max(n,this.lastR),m=g;m<=p;m++)o=this.grid[m][a],o.selected=!0,o.letter.setFill(J);else o.selected=!0,o.letter.setFill(J);this.lastC=a,this.lastR=n,this.lastTileMark.setVisible(!0),this.lastTileMark.x=this.tileSize*a+10,this.lastTileMark.y=this.tileSize*n+50}}}},{key:"shiftTiles",value:function(t,e){var i=!1;switch(t){case"R":this.shiftRight(e),e==this.lastR&&(i=!0);break;case"L":this.shiftLeft(e),e==this.lastR&&(i=!0);break;case"U":this.shiftUp(e),e==this.lastC&&(i=!0);break;case"D":this.shiftDown(e),e==this.lastC&&(i=!0);break}i&&(this.lastC=-1,this.lastR=-1,this.lastTileMark.setVisible(!1))}},{key:"shiftRight",value:function(t){if(!this.animating){this.animating=!0;for(var e=this.grid[t],i=e[e.length-1],s=this.addTile(i.letter.text,t,-1,i.selected,!0),r=[s.letter],a=0;a<this.cols;a++)r.push(e[a].letter);this.scene.tweens.add({targets:r,x:"+="+this.tileSize,duration:Y,ease:"Linear",onCompleteParams:[this],onComplete:function(t,r,a){for(var n=e.length-1;n>0;n--){var o=e[n-1];e[n]=o}e[0]=s,i.letter.destroy(),a.animating=!1}})}}},{key:"shiftLeft",value:function(t){if(!this.animating){this.animating=!0;for(var e=this.grid[t],i=e[0],s=this.addTile(i.letter.text,t,this.rows,i.selected,!0),r=[s.letter],a=0;a<this.cols;a++)r.push(e[a].letter);this.scene.tweens.add({targets:r,x:"-="+this.tileSize,duration:Y,ease:"Linear",onCompleteParams:[this],onComplete:function(t,r,a){for(var n=0;n<e.length-1;n++){var o=e[n+1];e[n]=o}e[e.length-1]=s,i.letter.destroy(),a.animating=!1}})}}},{key:"shiftUp",value:function(t){if(!this.animating){this.animating=!0;for(var e=[],i=[],s=0;s<this.rows;s++){var r=this.grid[s][t];e.push(r),i.push(r.letter)}var a=e[0],n=this.addTile(a.letter.text,this.rows,t,a.selected,!0);i.push(n.letter),this.scene.tweens.add({targets:i,y:"-="+this.tileSize,duration:Y,ease:"Linear",onCompleteParams:[this],onComplete:function(i,s,r){for(var o=0;o<e.length-1;o++){var h=e[o+1];r.grid[o][t]=h}r.grid[e.length-1][t]=n,a.letter.destroy(),r.animating=!1}})}}},{key:"shiftDown",value:function(t){if(!this.animating){this.animating=!0;for(var e=[],i=[],s=0;s<this.rows;s++){var r=this.grid[s][t];e.push(r),i.push(r.letter)}var a=e[e.length-1],n=this.addTile(a.letter.text,-1,t,a.selected,!0);i.push(n.letter),this.scene.tweens.add({targets:i,y:"+="+this.tileSize,duration:Y,ease:"Linear",onCompleteParams:[this],onComplete:function(i,s,r){for(var o=e.length-1;o>0;o--){var h=e[o-1];r.grid[o][t]=h}r.grid[0][t]=n,a.letter.destroy(),r.animating=!1}})}}}]),t}(),q=function(){function t(){Object(z["a"])(this,t),this.pool=[]}return Object(M["a"])(t,[{key:"tilesLeft",value:function(){return this.pool.length}},{key:"pop",value:function(){return this.pool.pop()}},{key:"refill",value:function(){var t,e;this.pool=[];var i={2:"J,K,Q,X,Z",3:"B,C,F,H,M,P,V,W,Y",4:"G",5:"L",6:"D,S,U",8:"N",9:"T,R",11:"O,I",13:"A",18:"E"};for(var s in i){var r=i[s].split(","),a=parseInt(s,10);for(t=0;t<r.length;t++)for(e=0;e<a;e++)this.pool.push(r[t])}for(t=this.pool.length;t;t-=1){e=Math.floor(Math.random()*t);var n=this.pool[t-1];this.pool[t-1]=this.pool[e],this.pool[e]=n}}}]),t}(),Q=75,tt=6,et=6,it=60,st=function(t){Object(D["a"])(i,t);var e=Object(W["a"])(i);function i(){return Object(z["a"])(this,i),e.call(this,{key:"latticewords"})}return Object(M["a"])(i,[{key:"preload",value:function(){this.load.spritesheet("pause","/latticewords/images/pause.png",{frameWidth:32,frameHeight:32}),this.load.image("grid","/latticewords/images/grid.png")}},{key:"create",value:function(){var t=this;this.pool=new q,this.pool.refill(),this.gameOver=!1,this.pointerDown=!1,this.paused=!1,this.currY=-1,this.currX=-1,this.dragged=!1,this.clickCount=0,this.textCfg={fontFamily:"Arial",fill:"#fff",stroke:"#222",strokeThickness:6},this.grid=new K(this,tt,et,Q,this.pool),this.grid.fill(),this.addScoreAndTimer();var e=new G.a.Geom.Rectangle(0,490,460,60),i=this.add.graphics({fillStyle:{color:"0x003F51B5"}});i.fillRectShape(e);var s=this.add.text(230,520,"Score Grid",{fontFamily:"Arial",fill:"#fff",stroke:"#000",strokeThickness:2,backgroundColor:"#757de8"}).setPadding(172,10);s.setFontSize(20),s.setOrigin(.5),s.setInteractive(),s.setName("scorebtn"),s.on("pointerover",(function(){s.setBackgroundColor("#858df8")})),s.on("pointerout",(function(){s.setBackgroundColor("#757de8")})),s.on("pointerup",(function(){t.onCheckClick()})),this.createPauseMenu(),this.createGameOverMenu(),this.input.on("gameobjectover",(function(t,e){"scorebtn"!=e.name&&e.setTint("0x00ffff")})),this.input.on("gameobjectout",(function(t,e){e.clearTint()})),this.input.on("pointerdown",(function(e){t.paused||t.gameOver||(t.pointerDown=!0,t.currY=e.y,t.currX=e.x,t.dragged=!1)})),this.input.on("pointerup",(function(e){t.paused||t.gameOver||(t.pointerDown=!1,t.currY=-1,t.currX=-1,0==t.dragged&&(t.clickCount++,1==t.clickCount&&t.time.addEvent({delay:200,callback:function(){t.grid.handlePointerUp(e.x,e.y,t.clickCount>=2),t.clickCount=0}})),t.dragged=!1)}))}},{key:"update",value:function(){if(1!=this.gameOver&&1!=this.paused){var t=this.input.activePointer;if(t.x<10||t.x>450||t.y<50||t.y>490)return this.pointerDown=!1,this.currY=-1,this.currX=-1,void(this.dragged=!1);if(this.pointerDown){var e=t.y,i=t.x,s=this.grid.getClickedRow(t.y),r=this.grid.getClickedCol(t.x),a=i-this.currX,n=e-this.currY,o=!1;a>=45?(this.grid.shiftTiles("R",s),o=!0):a<=-45?(this.grid.shiftTiles("L",s),o=!0):n<=-45?(this.grid.shiftTiles("U",r),o=!0):n>=45&&(this.grid.shiftTiles("D",r),o=!0),o&&(this.currX=i,this.currY=e,this.dragged=!0)}}}},{key:"restartGame",value:function(){this.score=0,this.gameOver=!1,this.timeLeft=it;var t=Math.floor(this.timeLeft/60),e=this.timeLeft-60*t;this.timerDisplay.setText(("0"+t).substr(-2)+":"+("0"+e).substr(-2)),this.pool.refill(),this.grid.empty(),this.grid.fill(),this.pauseGroup.setVisible(!1),this.grid.setVisible(!0),this.gameOverGroup.visible=!1,this.paused=!1,this.pauseBtn.setFrame(0),this.gameTimer.paused=!1,this.pauseBtn.setVisible(!0),Z.commit("resetCurrentHighScore")}},{key:"createGameOverMenu",value:function(){var t=this.add.rectangle(0,40,460,550,4149685);t.setOrigin(0,0);var e=this.add.text(230,80,"Game Over",this.textCfg);e.setFontSize(36),e.setOrigin(.5);var i=this.add.text(230,220,"Play Again",this.textCfg);i.setFontSize(24),i.setOrigin(.5),i.setInteractive(),i.on("pointerup",(function(){var t=this;setTimeout((function(){t.restartGame()}),100)}),this),this.gameOverGroup=this.add.container(0,40,[t,e,i]),this.gameOverGroup.setVisible(!1)}},{key:"createPauseMenu",value:function(){var t=this.add.rectangle(0,40,460,550,4149685);t.setOrigin(0,0);var e=this.add.text(230,80,"Game Paused",this.textCfg);e.setFontSize(36),e.setOrigin(.5);var i=this.add.text(230,200,"Resume",this.textCfg);i.setFontSize(24),i.setOrigin(.5),i.setInteractive(),i.on("pointerup",(function(){var t=this;this.pauseBtn.setFrame(0),this.gameTimer.paused=!1,this.pauseGroup.setVisible(!1),this.grid.setVisible(!0),setTimeout((function(){t.paused=!1}),100)}),this);var s=this.add.text(230,270,"Restart",this.textCfg);s.setFontSize(24),s.setOrigin(.5),s.setInteractive(),s.on("pointerup",(function(){var t=this;setTimeout((function(){t.restartGame()}),100)}),this),this.pauseGroup=this.add.container(0,40,[t,e,i,s]),this.pauseGroup.setVisible(!1),this.grid.setVisible(!0)}},{key:"addScoreAndTimer",value:function(){this.score=0,this.timeLeft=it;var t=new G.a.Geom.Rectangle(0,0,460,40),e=this.add.graphics({fillStyle:{color:153}});e.fillRectShape(t),this.scoreDisplay=this.add.text(10,3,"000000",this.textCfg),this.scoreDisplay.setFontSize(26),this.timerDisplay=this.add.text(450,3,"04:00",this.textCfg),this.timerDisplay.setFontSize(26),this.timerDisplay.setOrigin(1,0),this.gameTimer=this.time.addEvent({delay:1e3,callback:this.tick,callbackScope:this,loop:!0}),this.paused=!1,this.pauseBtn=this.add.sprite(230,4,"pause"),this.pauseBtn.setInteractive(),this.pauseBtn.setOrigin(.5,0),this.pauseBtn.on("pointerdown",(function(){this.paused=!this.paused,1==this.paused?(this.pauseBtn.setFrame(1),this.gameTimer.paused=!0,this.pauseGroup.setVisible(!0),this.grid.setVisible(!1)):(this.pauseBtn.setFrame(0),this.gameTimer.paused=!1,this.pauseGroup.setVisible(!1),this.grid.setVisible(!0))}),this)}},{key:"tick",value:function(){if(!this.gameOver){this.timeLeft--;var t=Math.floor(this.timeLeft/60),e=this.timeLeft-60*t;this.timerDisplay.setText(("0"+t).substr(-2)+":"+("0"+e).substr(-2));var i=""+this.score;this.scoreDisplay.setText(i.padStart(6,"0")),this.timeLeft<=15&&this.grid.flash(),0==this.timeLeft&&(this.gameOver=!0,this.pauseBtn.setVisible(!1),this.gameOverGroup.setVisible(!0),this.grid.setVisible(!1),Z.commit("addHighScore",this.score))}}},{key:"onCheckClick",value:function(){var t=this;this.paused||this.gameOver||this.grid.checkWords((function(e,i){t.score+=e,t.timeLeft+=i}))}}]),i}(G.a.Scene),rt={name:"LatticeWords",components:{},computed:Object(R["a"])({},Object(F["b"])({gameID:"gameID"})),methods:{initGame:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("getGames");case 2:return e.next=4,t.$store.dispatch("getHighScores",t.gameID);case 4:i={type:G.a.AUTO,scale:{parent:"lwgame",mode:G.a.Scale.FIT,width:460,height:550},backgroundColor:"3F51B5",title:"LatticeWords",scene:[N,st,$]},window.game=new G.a.Game(i);case 6:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.initGame()},destroyed:function(){window.game.destroy(!0)}},at=rt,nt=(i("b81c"),Object(c["a"])(at,B,P,!1,null,"c403c3f8",null)),ot=nt.exports,ht=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},lt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{attrs:{id:"wordomino"}})])}],ct=function(){function t(e,i,s,r){Object(z["a"])(this,t);var a=t.SIZE;this.scene=e,this.rect=new G.a.Geom.Rectangle(i,s,a,a),this.selected=!1,this.mouseOver=!1,this.used=!1;var n={fontFamily:"Josefin Slab",fontSize:"24px"};this.letter=this.scene.add.text(this.rect.left+22,this.rect.top+23,r,n),this.letter.setOrigin(.5)}return Object(M["a"])(t,[{key:"isEmpty",value:function(){return""==this.letter.text}},{key:"setLetter",value:function(t){this.letter.setText(t),this.draw()}},{key:"getLetter",value:function(){return this.letter.text}},{key:"mouseMove",value:function(t,e){if(!this.used){var i=this.mouseOver;return this.mouseOver=this.rect.contains(t,e),this.mouseOver!=i&&this.draw(),this.mouseOver}}},{key:"deselect",value:function(){this.selected&&(this.selected=!1,this.letter.setFill("#ffffff"))}},{key:"markUsed",value:function(){this.used=!0,this.selected=!1,this.letter.setVisible(!1),this.draw()}},{key:"restoreLetter",value:function(){this.used=!1,this.selected=!1,this.letter.setVisible(!0),this.letter.setFill("#ffffff"),this.draw()}},{key:"mouseDown",value:function(t,e){var i=!1;return!this.used&&(this.rect.contains(t,e)&&(i=!0,this.selected=!0,this.letter.setFill("#1565c0"),this.draw()),i)}},{key:"draw",value:function(){this.scene.graphics.fillStyle(2578),this.scene.graphics.lineStyle(1,14342874),(this.mouseOver||this.selected)&&this.scene.graphics.fillStyle(1450552),this.scene.graphics.fillRectShape(this.rect),this.scene.graphics.strokeRectShape(this.rect)}}],[{key:"SIZE",get:function(){return 45}}]),t}(),ut=function(){function t(e,i,s){Object(z["a"])(this,t),this.pool=[],this.tiles=[],this.active=!1,this.selectedLetter={srcRow:-1,srsCol:-1,letter:""},this.eventBus=e.eventBus;for(var r=ct.SIZE,a=0;a<5;a++){this.tiles.push([]);for(var n=0;n<5;n++){var o=i+r*n,h=s+r*a,l=new ct(e,o,h,"");this.tiles[a].push(l)}}this.boardRect=new G.a.Geom.Rectangle(i,s,5*r,5*r)}return Object(M["a"])(t,[{key:"isActive",value:function(){return this.active}},{key:"activate",value:function(){this.active=!0}},{key:"deactivate",value:function(){this.active=!1}},{key:"mouseMove",value:function(t,e){if(this.active)for(var i=0;i<5;i++)for(var s=0;s<5;s++)this.tiles[i][s].mouseMove(t,e)}},{key:"mouseDown",value:function(t,e){if(0==this.boardRect.contains(t,e))return!1;var i=!1;if(this.active)for(var s=0;s<5;s++)for(var r=0;r<5;r++)this.tiles[s][r].mouseDown(t,e)&&(this.selectedLetter={srcRow:s,srcCol:r,letter:this.tiles[s][r].letter.text},this.eventBus.emit("letterPicked",this.selectedLetter),i=!0);if(i){for(var a=0;a<5;a++)for(var n=0;n<5;n++)a!=this.selectedLetter.srcRow&&n!=this.selectedLetter.srcCol&&this.tiles[a][n].deselect();this.draw()}return i}},{key:"letterUsed",value:function(t){var e=t.srcRow,i=t.srcCol;this.tiles[e][i].markUsed()}},{key:"returnLetter",value:function(t){var e=t.srcRow,i=t.srcCol;this.tiles[e][i].restoreLetter()}},{key:"draw",value:function(){for(var t=0;t<5;t++)for(var e=0;e<5;e++)this.tiles[t][e].draw()}},{key:"stockSize",value:function(){return this.pool.length}},{key:"fillGrid",value:function(){this.stockSize()<25&&this.fillLetterStock();for(var t=0;t<5;t++)for(var e=0;e<5;e++)this.tiles[t][e].isEmpty()&&this.tiles[t][e].setLetter(this.pool.pop())}},{key:"fillLetterStock",value:function(){var t,e;this.pool=[];var i={2:"J,K,Q,X,Z",3:"B,C,F,H,M,P,V,W,Y",4:"G",5:"L",6:"D,S,U",8:"N",9:"T,R",11:"O,I",13:"A",18:"E"};for(var s in i){var r=i[s].split(","),a=parseInt(s,10);for(t=0;t<r.length;t++)for(e=0;e<a;e++)this.pool.push(r[t])}for(t=this.pool.length;t;t-=1){e=Math.floor(Math.random()*t);var n=this.pool[t-1];this.pool[t-1]=this.pool[e],this.pool[e]=n}}}]),t}(),dt=i("ade3"),ft=(i("fb6a"),function t(e){Object(z["a"])(this,t),Object(dt["a"])(this,"startRow",0),Object(dt["a"])(this,"startCol",0),Object(dt["a"])(this,"wordLength",0),Object(dt["a"])(this,"direction",""),this.startRow=e.row,this.startCol=e.col,this.wordLength=e.wordLength,this.direction=e.direction}),vt=function t(e){var i=this;Object(z["a"])(this,t),Object(dt["a"])(this,"name",""),Object(dt["a"])(this,"layout",[]),Object(dt["a"])(this,"words",[]),this.name=e.name,this.layout=[],this.words=[];var s=[];e.layout.forEach((function(t){s.push(t),5==s.length&&(i.layout.push(s.slice(0)),s=[])})),e.words.forEach((function(t){var e=new ft(t);i.words.push(e)}))},gt=function(){function t(e,i,s){Object(z["a"])(this,t),Object(dt["a"])(this,"cardInfo",null),Object(dt["a"])(this,"size",22),this.scene=e,this.x=i,this.y=s,this.mouseOver=!1,this.selected=!1,this.disabled=!1,this.fullRect=new G.a.Geom.Rectangle(i,s,5*this.size,5*this.size),this.tiles=[];for(var r=0;r<5;r++){this.tiles.push([]);for(var a=0;a<5;a++){var n=this.x+this.size*a,o=this.y+this.size*r,h=new G.a.Geom.Rectangle(n,o,this.size,this.size);this.tiles[r].push(h)}}}return Object(M["a"])(t,[{key:"setCardInfo",value:function(t){this.cardInfo=t,this.mouseOver=!1,this.seleced=!1,this.disabled=!1}},{key:"mouseMove",value:function(t,e){var i=this.mouseOver;this.mouseOver=this.fullRect.contains(t,e),this.mouseOver!=i&&this.draw()}},{key:"mouseDown",value:function(t,e){return this.selected=this.fullRect.contains(t,e),this.selected}},{key:"disable",value:function(){this.disabled=!0}},{key:"draw",value:function(){null==this.cardInfo?this.drawLoading():this.drawLayout()}},{key:"drawLoading",value:function(){this.scene.graphics.lineStyle(1,16777215),this.scene.graphics.strokeRectShape(this.fullRect)}},{key:"drawLayout",value:function(){for(var t=0;t<5;t++)for(var e=0;e<5;e++)this.disabled||this.selected?(this.scene.graphics.lineStyle(1,2578),this.scene.graphics.fillStyle(2578)):1==this.cardInfo.layout[t][e]?(this.scene.graphics.fillStyle(10132122),this.scene.graphics.lineStyle(1,4473924),(this.mouseOver||this.selected)&&this.scene.graphics.fillStyle(1402304)):(this.scene.graphics.fillStyle(2578),this.scene.graphics.lineStyle(1,4473924),this.mouseOver&&this.scene.graphics.fillStyle(1450552)),this.scene.graphics.fillRectShape(this.tiles[t][e]),this.scene.graphics.strokeRectShape(this.tiles[t][e]);this.scene.graphics.lineStyle(1,14342874),(this.disabled||this.selected)&&this.scene.graphics.lineStyle(1,4473924),this.scene.graphics.strokeRectShape(this.fullRect)}}]),t}(),pt=function(){function t(e){var i=this;Object(z["a"])(this,t),this.loaded=!1,this.error=null,this.stock=[],this.cards=[],this.choices=[],this.scene=e,this.active=!1,V.a.get("/api/wordomino/shapes").then((function(t){i.createCards(t.data.cards),i.refill(),i.pickTwo(),i.draw()})).catch((function(t){i.error=t}))}return Object(M["a"])(t,[{key:"createCards",value:function(t){var e=this;this.stock=[],t.forEach((function(t){var i=new vt(t);e.stock.push(i)})),this.loaded=!0}},{key:"pickTwo",value:function(){var t=this;this.choices.forEach((function(e){var i=t.cards.pop();e.setCardInfo(i)})),this.active=!0}},{key:"setChoiceCoordinates",value:function(t,e,i,s){this.choices.push(new gt(this.scene,t,e)),this.choices.push(new gt(this.scene,i,s))}},{key:"refill",value:function(){var t;this.cards=this.stock.slice(0),(t=this.cards).push.apply(t,Object(U["a"])(this.stock.slice(0)));for(var e=this.cards.length;e;e-=1){var i=Math.floor(Math.random()*e),s=this.cards[e-1];this.cards[e-1]=this.cards[i],this.cards[i]=s}}},{key:"isLoaded",value:function(){return this.loaded}},{key:"isActive",value:function(){return this.active}},{key:"deactivate",value:function(){this.active=!1}},{key:"activate",value:function(){this.active=!0}},{key:"failed",value:function(){return null!=this.error}},{key:"mouseMove",value:function(t,e){this.active&&this.choices.forEach((function(i){i.mouseMove(t,e)}))}},{key:"mouseDown",value:function(t,e){var i=this,s=!1;this.active&&(this.choices.forEach((function(r){r.mouseDown(t,e)&&(s=!0,i.active=!1,i.scene.eventBus.emit("cardPicked",r.cardInfo))})),s&&(this.choices.forEach((function(t){0==t.selected&&t.disable()})),this.draw()))}},{key:"draw",value:function(){this.choices.forEach((function(t){t.draw()}))}}]),t}(),mt=function t(e,i,s,r,a){Object(z["a"])(this,t),this.container=e.add.container(i,s),this.layout=r,this.scene=e;var n=0,o=0,h=-1,l=-1,c=999,u=999;this.blocks=[];for(var d=0;d<5;d++){n=0;for(var f=0;f<5;f++){if(r[d][f]){var v=e.add.rectangle(n,o,a,a,1402304);n<c&&(c=n),n+a>h&&(h=n+a),o<u&&(u=o),o+a>l&&(l=o+a),v.setOrigin(0,0),this.container.add(v),this.blocks.push(v)}n+=a}o+=a}this.centerX=(h-c)/2,this.centerY=(l-u)/2},wt=function(){function t(e,i,s,r){Object(z["a"])(this,t),this.scene=e,this.rect=new G.a.Geom.Rectangle(i,s,r,r),this.filled=!1}return Object(M["a"])(t,[{key:"clear",value:function(){this.filled=!1}},{key:"draw",value:function(){this.scene.graphics.lineStyle(1,4473924),this.scene.graphics.fillStyle(14342874),this.scene.graphics.strokeRectShape(this.rect),this.filled&&this.scene.graphics.fillRectShape(this.rect)}}]),t}(),yt=function(){function t(e,i,s){Object(z["a"])(this,t),this.x=i,this.y=s,this.scene=e;var r=t.SIZE;this.rect=new G.a.Geom.Rectangle(this.x,this.y,9*r,9*r),this.spaces=[];for(var a=0;a<9;a++){this.spaces.push([]);for(var n=0;n<9;n++){var o=this.x+r*n,h=this.y+r*a,l=new wt(this.scene,o,h,r);this.spaces[a].push(l)}}this.reset()}return Object(M["a"])(t,[{key:"reset",value:function(){this.active=!1,this.shape=null;for(var t=0;t<9;t++)for(var e=0;e<9;e++)this.spaces[t][e].clear()}},{key:"setNewShape",value:function(e){this.shape=new mt(this.scene,this.x,this.y,e,t.SIZE)}},{key:"activate",value:function(){this.active=!0,this.draw()}},{key:"deactivate",value:function(){this.active=!1,this.draw()}},{key:"mouseMove",value:function(t,e){if(this.active){if(0==this.rect.contains(t,e))return!1;if(null==this.shape)return!1;for(var i=0;i<5;i++)for(var s=0;s<5;s++);}return!1}},{key:"draw",value:function(){for(var t=0;t<9;t++)for(var e=0;e<9;e++)this.spaces[t][e].draw();this.scene.graphics.lineStyle(1,14342874),this.scene.graphics.strokeRectShape(this.rect)}}],[{key:"SIZE",get:function(){return 25}}]),t}(),kt=function(t){Object(D["a"])(i,t);var e=Object(W["a"])(i);function i(t,s,r){var a;return Object(z["a"])(this,i),a=e.call(this,t,s,r,""),a.placed=!1,a.placedLetterInfo=null,a}return Object(M["a"])(i,[{key:"reset",value:function(){this.setLetter(""),this.placed=!1,this.placedLetterInfo=null,this.draw()}},{key:"replacePriorLetter",value:function(){this.placed?this.letter.setText(this.placedLetterInfo.letter):this.letter.setText(""),this.draw()}},{key:"place",value:function(t){this.placed=!0,this.placedLetterInfo=t,this.draw()}},{key:"clearPlacedetter",value:function(){this.placed=!1,this.selected=!1,this.mouseOver=!1;var t=this.placedLetterInfo;return this.placedLetterInfo=null,this.letter.setText(""),this.draw(),t}},{key:"showError",value:function(){var t=this;this.letter.setFill("#cc0000"),this.scene.tweens.add({targets:this.letter,alpha:.7,duration:100,angle:{from:-20,to:20},ease:"Linear",yoyo:!0,repeat:2,delay:0,onComplete:function(){t.letter.angle=0}})}},{key:"isAvailable",value:function(){return this.active&&!this.placed}},{key:"mouseDown",value:function(t,e){return this.rect.contains(t,e)}},{key:"draw",value:function(){if(this.placed)return this.scene.graphics.fillStyle(2578),this.scene.graphics.lineStyle(1,14342874),void(this.placedLetterInfo.letter==this.letter.text?this.letter.setFill("#ffffff"):this.letter.setFill("#cc0000"));this.scene.graphics.fillStyle(1450552),this.scene.graphics.lineStyle(1,14342874),this.active&&!this.placed?(this.scene.graphics.fillStyle(1402304),this.letter.setFill("#ffffff"),this.mouseOver&&this.scene.graphics.fillStyle(15503)):(this.letter.setFill("#cc0000"),this.mouseOver&&this.scene.graphics.fillStyle(1450552)),this.scene.graphics.fillRectShape(this.rect),this.scene.graphics.strokeRectShape(this.rect)}}]),i}(ct),bt=function(){function t(e,i,s,r){Object(z["a"])(this,t);var a={fontFamily:"Josefin Sans",fontSize:"14px",align:"center",color:"#ffffff"};this.rect=new G.a.Geom.Rectangle(i,s,90,30),this.text=e.add.text(i+45,s+15,r,a),this.text.setOrigin(.5),this.graphics=e.graphics,this.enabled=!1}return Object(M["a"])(t,[{key:"mouseDown",value:function(t,e){return 0!=this.enabled&&this.rect.contains(t,e)}},{key:"draw",value:function(){this.enabled?(this.graphics.lineStyle(1,14342874),this.graphics.fillStyle(1402304),this.text.setFill("#ffffff")):(this.graphics.lineStyle(1,14342874),this.graphics.fillStyle(19),this.text.setFill("#333333")),this.graphics.fillRoundedRect(this.rect.x,this.rect.y,this.rect.width,this.rect.height,{tl:0,tr:0,bl:10,br:10}),this.graphics.strokeRoundedRect(this.rect.x,this.rect.y,this.rect.width,this.rect.height,{tl:0,tr:0,bl:10,br:10})}}]),t}(),St=function(){function t(e,i,s){Object(z["a"])(this,t),this.active=!1,this.x=i,this.y=s,this.cardInfo=null,this.tiles=[],this.clearActiveLetter(),this.tweens=e.tweens,this.eventBus=e.eventBus,this.graphics=e.graphics;var r=ct.SIZE;this.boardRect=new G.a.Geom.Rectangle(i,s,5*r,5*r);for(var a=0;a<5;a++){this.tiles.push([]);for(var n=0;n<5;n++){var o=this.x+r*n,h=this.y+r*a,l=new kt(e,o,h);this.tiles[a].push(l)}}this.clearBtn=new bt(e,255,235,"Clear"),this.submitBtn=new bt(e,390,235,"Submit"),this.reset()}return Object(M["a"])(t,[{key:"setNewLetter",value:function(t){this.targetRow>-1&&this.targetCol>-1&&(this.tiles[this.targetRow][this.targetCol].setLetter(""),this.tiles[this.targetRow][this.targetCol].draw()),this.targetRow=0,this.targetCol=0,this.tiles[0][0].setLetter(t.letter),this.activeLetterInfo=t,this.tiles[this.targetRow][this.targetCol].draw()}},{key:"clearActiveLetter",value:function(){this.targetRow=-1,this.targetCol=-1,this.activeLetterInfo=null}},{key:"isPlacingLetter",value:function(){return null!=this.activeLetterInfo}},{key:"isActive",value:function(){return this.active}},{key:"activate",value:function(){this.active=!0,this.clearBtn.enabled=!0,this.draw()}},{key:"deactivate",value:function(){this.active=!1,this.submitBtn.enabled=!1,this.clearBtn.enabled=!1,this.draw()}},{key:"reset",value:function(){this.cardInfo=null,this.clearActiveLetter();for(var t=0;t<5;t++)for(var e=0;e<5;e++)this.tiles[t][e].reset()}},{key:"setCard",value:function(t){this.cardInfo=t;for(var e=0;e<5;e++)for(var i=0;i<5;i++)1==this.cardInfo.layout[e][i]&&(this.tiles[e][i].active=!0)}},{key:"isCardFull",value:function(){for(var t=0;t<5;t++)for(var e=0;e<5;e++)if(this.tiles[t][e].isAvailable())return this.submitBtn.enabled=!1,this.draw(),this.eventBus.emit("cardNotFull"),!1;return this.submitBtn.enabled=!0,this.eventBus.emit("cardFull"),this.draw(),!0}},{key:"clearWords",value:function(){for(var t=0;t<5;t++)for(var e=0;e<5;e++){var i=this.tiles[t][e];if(i.placed){var s=i.clearPlacedetter();this.eventBus.emit("letterReturned",s)}}}},{key:"submitWords",value:function(){var t=this,e=[];this.cardInfo.words.forEach((function(i){var s=i.startRow,r=i.startCol,a=i.wordLength,n="";if("right"==i.direction)for(var o=r;o<r+a;o++)n+=t.tiles[s][o].getLetter();else for(var h=s;h<s+a;h++)n+=t.tiles[h][r].getLetter();e.push(n)}));var i={words:e.join(",")};this.eventBus.emit("wordsSubmitted"),V.a.post("/api/wordomino/check",i).then((function(e){t.handleWordResults(e.data)})).catch((function(){t.showFailedSubmit()}))}},{key:"handleWordResults",value:function(t){0==t.success?this.showFailedSubmit():this.eventBus.emit("wordsValid",this.cardInfo)}},{key:"showFailedSubmit",value:function(){for(var t=this,e=[],i=0;i<5;i++)for(var s=0;s<5;s++){var r=this.tiles[i][s];r.placed&&(r.letter.setFill("#cc0000"),e.push(r.letter))}this.tweens.add({targets:e,alpha:.7,duration:100,angle:{from:-20,to:20},ease:"Linear",yoyo:!0,repeat:2,delay:0,onComplete:function(){e.forEach((function(t){t.angle=0,t.setFill("#ffffff")})),t.eventBus.emit("wordsFailed")}})}},{key:"isCardSelected",value:function(){return null!=this.cardInfo}},{key:"mouseMove",value:function(t,e){if(this.active){if(0==this.boardRect.contains(t,e))return!1;if(0==this.isPlacingLetter())return!1;for(var i=0;i<5;i++)for(var s=0;s<5;s++)if(this.tiles[i][s].mouseMove(t,e)&&(i!=this.targetRow||s!=this.targetCol)){var r=this.tiles[this.targetRow][this.targetCol].letter.text;this.tiles[this.targetRow][this.targetCol].replacePriorLetter(),this.tiles[i][s].setLetter(r),this.targetRow=i,this.targetCol=s}}return!1}},{key:"mouseDown",value:function(t,e){if(this.active){if(this.submitBtn.mouseDown(t,e))return void this.submitWords();if(this.clearBtn.mouseDown(t,e))return void this.clearWords();if(0==this.boardRect.contains(t,e))return;for(var i={r:-1,c:-1,tile:null},s=0;s<5;s++){for(var r=0;r<5;r++)if(this.tiles[s][r].mouseDown(t,e)){i={r:s,c:r,tile:this.tiles[s][r]};break}if(null!=i.tile)break}if(null!=i.tile)if(this.isPlacingLetter())i.r==this.targetRow&&i.c==this.targetCol&&i.tile.isAvailable()?(i.tile.place(this.activeLetterInfo),this.eventBus.emit("letterPlaced",this.activeLetterInfo),this.clearActiveLetter(),this.isCardFull()):i.tile.showError();else if(i.tile.placed){var a=i.tile.clearPlacedetter();this.eventBus.emit("letterReturned",a)}}}},{key:"draw",value:function(){for(var t=0;t<5;t++)for(var e=0;e<5;e++)this.tiles[t][e].draw();this.clearBtn.draw(),this.submitBtn.draw()}}]),t}(),Ot=function(){function t(e,i,s){Object(z["a"])(this,t),this.scene=e,this.message="",this.rect=new G.a.Geom.Rectangle(i,s,225,30);var r={fontFamily:"Josefin Sans",fontSize:"14px",align:"center",color:"#ffffff"};this.msgDisplay=this.scene.add.text(this.rect.left+113,this.rect.top+15,this.message,r),this.msgDisplay.setOrigin(.5),this.draw()}return Object(M["a"])(t,[{key:"setMessage",value:function(t){this.message=t,this.msgDisplay.setText(t),this.draw()}},{key:"draw",value:function(){this.scene.graphics.lineStyle(2,15790320),this.scene.graphics.strokeRectShape(this.rect)}}]),t}(),xt=function(t){Object(D["a"])(i,t);var e=Object(W["a"])(i);function i(){return Object(z["a"])(this,i),e.call(this,{key:"wordomino"})}return Object(M["a"])(i,[{key:"create",value:function(){var t=this;this.eventBus=new G.a.Events.EventEmitter,this.gameState="PICK_CARD",this.graphics=this.add.graphics(),this.eventBus.on("cardPicked",this.handleCardPicked,this),this.eventBus.on("letterPicked",this.handleLetterPicked,this),this.eventBus.on("letterPlaced",this.handleLetterPlaced,this),this.eventBus.on("letterReturned",this.handleLetterReturned,this),this.eventBus.on("wordsSubmitted",this.handleWordsSubmitted,this),this.eventBus.on("wordsFailed",this.handleWordsFailed,this),this.eventBus.on("cardFull",this.handleCardFull,this),this.eventBus.on("cardNotFull",this.handleCardNotFull,this),this.eventBus.on("wordsValid",this.handleWordsValid,this),this.letterPool=new ut(this,10,10),this.letterPool.fillGrid(),this.msgBox=new Ot(this,10,245),this.msgBox.setMessage("Pick a puzzle shape card"),this.cardPool=new pt(this),this.cardPool.setChoiceCoordinates(10,285,125,285),this.words=new St(this,255,10),this.puzzle=new yt(this,255,285),this.draw(),this.gameTimer=this.time.addEvent({delay:1e3,callback:this.tick,callbackScope:this,loop:!0}),this.input.on("pointermove",(function(e){t.cardPool.mouseMove(e.x,e.y),t.letterPool.mouseMove(e.x,e.y),t.words.mouseMove(e.x,e.y),t.puzzle.mouseMove(e.x,e.y)})),this.input.on("pointerdown",(function(e){t.cardPool.mouseDown(e.x,e.y),t.letterPool.mouseDown(e.x,e.y),t.words.mouseDown(e.x,e.y)}))}},{key:"tick",value:function(){}},{key:"handleCardPicked",value:function(t){"PICK_CARD"==this.gameState&&(this.gameState="PICK_LETTERS",this.msgBox.setMessage("Fill card with words"),this.msgBox.draw(),this.words.setCard(t),this.words.draw(),this.letterPool.activate(),this.words.activate(),this.cardPool.deactivate())}},{key:"handleLetterPicked",value:function(t){this.gameState="PLACE_LETTER",this.msgBox.setMessage("Place letter on card"),this.msgBox.draw(),this.words.setNewLetter(t),this.words.draw()}},{key:"handleLetterPlaced",value:function(t){"PLACE_LETTER"==this.gameState&&(this.gameState="PICK_LETTERS",this.msgBox.setMessage("Fill card with words"),this.msgBox.draw(),this.words.draw(),this.letterPool.letterUsed(t),this.letterPool.draw())}},{key:"handleLetterReturned",value:function(t){this.letterPool.returnLetter(t)}},{key:"handleWordsSubmitted",value:function(){this.msgBox.setMessage("Checking words..."),this.msgBox.draw()}},{key:"handleWordsFailed",value:function(){this.msgBox.setMessage("Failed! Fix words on card"),this.msgBox.draw()}},{key:"handleCardNotFull",value:function(){this.msgBox.setMessage("Fill card with words"),this.msgBox.draw()}},{key:"handleCardFull",value:function(){this.msgBox.setMessage("Submit words!"),this.msgBox.draw()}},{key:"handleWordsValid",value:function(t){this.msgBox.setMessage("Place shape in puzzle"),this.msgBox.draw(),this.letterPool.deactivate(),this.words.deactivate(),this.cardPool.deactivate(),this.puzzle.setNewShape(t.layout),this.puzzle.activate()}},{key:"draw",value:function(){this.letterPool.draw(),this.cardPool.draw(),this.msgBox.draw(),this.words.draw(),this.puzzle.draw()}}]),i}(G.a.Scene),Ct={name:"Wordomino",components:{},mounted:function(){var t={scale:{mode:G.a.Scale.FIT,autoCenter:G.a.Scale.NO_CENTER},parent:"wordomino",width:490,height:520,title:"Wordomino",backgroundColor:"000a12",scene:[xt]};window.game=new G.a.Game(t)},destroyed:function(){window.game.destroy(!0)}},Rt=Ct,Ft=Object(c["a"])(Rt,ht,lt,!1,null,"4a6d5dd4",null),Lt=Ft.exports,jt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Tt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{attrs:{id:"squaresgame"}})])}],It=function(){function t(e,i,s){Object(z["a"])(this,t),this.color=e,this.active=!1,this.rect=new G.a.Geom.Rectangle(i,s,t.SIZE,t.SIZE),this.invisible=!1}return Object(M["a"])(t,[{key:"getCenter",value:function(){return G.a.Geom.Rectangle.GetCenter(this.rect)}},{key:"setInvisible",value:function(){this.invisible=!0}},{key:"setInactive",value:function(){this.inactive=!0}},{key:"getColor",value:function(){return this.color}},{key:"setColor",value:function(t){this.color=t}},{key:"draw",value:function(t){if(!this.invisible){var e=[2171169,14743546,15503,6198003];t.fillStyle(e[this.color]),t.fillRectShape(this.rect),t.lineStyle(1,0),t.fillRectShape(this.rect),t.strokeRectShape(this.rect)}}},{key:"hit",value:function(t,e){return!this.invisible&&!this.inactive&&(this.active=this.rect.contains(t,e),this.active)}}],[{key:"SIZE",get:function(){return 50}}]),t}(),Bt=function(t){Object(D["a"])(i,t);var e=Object(W["a"])(i);function i(){return Object(z["a"])(this,i),e.call(this,{key:"squares"})}return Object(M["a"])(i,[{key:"create",value:function(){for(var t=this,e=[],i=0;i<64;i++)e.push(i%4);for(var s=e.length;s;s-=1){var r=Math.floor(Math.random()*s),a=e[s-1];e[s-1]=e[r],e[r]=a}this.graphics=this.add.graphics(),this.grid=[];for(var n=0;n<=7;n++){for(var o=[],h=0;h<=7;h++){var l=It.SIZE*h,c=It.SIZE*n,u=new It(e.pop(),l,c);o.push(u),0!=n&&7!=n&&0!=h&&7!=h||u.setInactive()}this.grid.push(o)}this.border=new G.a.Geom.Rectangle(It.SIZE,It.SIZE,6*It.SIZE,6*It.SIZE),this.showBorder=!0,this.redraw(),this.input.on("pointermove",(function(e){for(var i=e.y,s=e.x,r=0;r<=7;r++)for(var a=0;a<=7;a++)t.grid[r][a].hit(s,i);t.redraw()})),this.input.on("pointerup",(function(e){for(var i=e.y,s=e.x,r=function(e){for(var r=function(r){if(t.grid[e][r].hit(s,i)){t.showBorder=!1,t.drawBorder();var a=t.grid[e][r].getCenter(),n=1.5*It.SIZE,o=a.x-n,h=a.y-n,l=3*It.SIZE,c=3*It.SIZE;t.game.renderer.snapshotArea(o,h,l,c,(function(i){var s=new G.a.Geom.Rectangle(o,h,l,c);t.graphics.fillStyle(0),t.graphics.fillRectShape(s),t.textures.addImage("snap",i);var n=t.add.image(a.x,a.y,"snap");t.tweens.add({targets:[n],rotation:1.5708,duration:500,ease:"Linear",onCompleteParams:[t],onComplete:function(){t.textures.remove("snap"),n.destroy(),t.rotateAround(e,r),t.redraw(),t.showBorder=!0,t.drawBorder()}})}))}},a=0;a<=7;a++)r(a)},a=0;a<=7;a++)r(a)}))}},{key:"drawBorder",value:function(){this.graphics.lineStyle(1,0),this.showBorder&&this.graphics.lineStyle(1,16711731),this.graphics.strokeRectShape(this.border)}},{key:"rotateAround",value:function(t,e){for(var i=[[0,0,0],[0,0,0],[0,0,0]],s=t-1,r=e-1,a=t-1;a<=t+1;a++)for(var n=e-1;n<=e+1;n++){var o=this.grid[a][n].getColor(),h=a-s,l=n-r,c=l,u=2-h;i[c][u]=o}for(var d=0;d<=2;d++)for(var f=0;f<=2;f++)this.grid[d+s][f+r].setColor(i[d][f])}},{key:"redraw",value:function(){this.graphics.clear();for(var t=0;t<=7;t++)for(var e=0;e<=7;e++)this.grid[t][e].draw(this.graphics);this.drawBorder()}}]),i}(G.a.Scene),Pt={name:"Squares",components:{},mounted:function(){var t={scale:{mode:G.a.Scale.FIT,autoCenter:G.a.Scale.NO_CENTER},parent:"squaresgame",width:600,height:640,title:"Squares",scene:[Bt]};window.game=new G.a.Game(t)},destroyed:function(){window.game.destroy(!0)}},Et=Pt,_t=(i("67a4"),Object(c["a"])(Et,jt,Tt,!1,null,"0ffbdb05",null)),Gt=_t.exports,zt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Mt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content"},[i("h2",[t._v("Virus")])])}],Dt=(i("18a5"),i("7aaa")),Wt={name:"virus",components:{},data:function(){return{game:null}},mounted:function(){var t=new Dt["a"];document.body.appendChild(t.view),t.loader.add("bunny","test.png").load((function(e,i){var s=new Dt["b"](i.bunny.texture);s.x=t.renderer.width/2,s.y=t.renderer.height/2,s.anchor.x=.5,s.anchor.y=.5,t.stage.addChild(s),t.ticker.add((function(){s.rotation+=.01}))}))}},At=Wt,Vt=(i("e016"),Object(c["a"])(At,zt,Mt,!1,null,"0223c0d6",null)),Zt=Vt.exports;s["a"].use(m["a"]);var Ht=new m["a"]({mode:"history",routes:[{path:"/",alias:"/home",name:"home",component:O},{path:"/virus",name:"virus",component:Zt},{path:"/games",name:"games",component:I},{path:"/games/latticewords",name:"latticewords",component:ot},{path:"/games/squares",name:"squares",component:Gt},{path:"/games/wordomino",name:"wordomino",component:Lt}]});s["a"].config.productionTip=!1,new s["a"]({router:Ht,store:Z,render:function(t){return t(p)}}).$mount("#app")},"5cd2":function(t,e,i){},"67a4":function(t,e,i){"use strict";i("cc54")},"7e0e":function(t,e,i){"use strict";i("4f30")},"85ec":function(t,e,i){},"90e7":function(t,e,i){},acaf:function(t,e,i){},b81c:function(t,e,i){"use strict";i("90e7")},baf3:function(t,e,i){"use strict";i("5cd2")},c116:function(t,e,i){"use strict";i("acaf")},cc54:function(t,e,i){},e016:function(t,e,i){"use strict";i("1045")}});
//# sourceMappingURL=app.f5febed9.js.map